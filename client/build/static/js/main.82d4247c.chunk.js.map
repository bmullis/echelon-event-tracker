{"version":3,"sources":["components/EventMap/MapMarker.js","utils/formatMarkers.js","context/NewEventContext.js","components/EventMap/NewMarkerForm.js","components/EventMap/NewMarker.js","utils/useFetch.js","utils/usePrevLocation.js","utils/getVisibleMarkers.js","context/VisibleEventsContext.js","components/EventMap/index.js","components/Graphs/RadialGraph.js","components/Graphs/RadialGraphSeverity.js","App.js","index.js"],"names":["MapMarker","_ref","severity","type","marker","react_default","a","createElement","esm","key","id","latitude","longitude","style","height","width","borderRadius","borderWidth","borderStyle","background","borderColor","NewEventContext","React","createContext","NewEventContextProvider","props","_useState","useState","_useState2","Object","slicedToArray","newEvent","setNewEvent","useEffect","Provider","value","children","NewMarkerForm","handleCloseAfterSubmit","eventType","setEventType","_useState3","_useState4","eventSeverity","setEventSeverity","_useState5","_useState6","eventTitle","setEventTitle","_useState7","_useState8","eventDescription","setEventDescription","_useContext","useContext","_useContext2","className","onSubmit","event","preventDefault","title","description","handleFormSubmit","required","onChange","target","placeholder","NewMarker","isActive","setIsActive","dropdownEle","useRef","window","addEventListener","handleWindowClick","current","contains","position","ref","concat","onClick","EventMap_NewMarkerForm","useFetch","reqResource","resource","setResource","Axios","get","then","res","data","catch","err","console","log","usePrevLocation","prevLocation","setPrevLocation","mapLocationStorage","localStorage","getItem","mapLocation","JSON","parse","getVisibleMarkers","markers","bounds","visibleMarkers","forEach","longInBounds","_ne","lng","_sw","latInBounds","lat","push","VisibleEventsContext","VisibleEventsContextProvider","visibleEvents","setVisibleEvents","EventMap","setLatitude","setLongitude","zoom","setZoom","setMarkers","_useContext3","_useContext4","_useState9","_useState10","isClickable","setIsClickable","_useState11","_useState12","mapContainer","prevMapLocation","getMap","getBounds","events","getCursor","mapboxApiAccessToken","process","mapStyle","onViewportChange","viewport","setItem","stringify","post","lngLat","handleMapClick","length","map","EventMap_MapMarker","EventMap_NewMarker","RadialGraph","setData","prev","dataArray","sort","b","localeCompare","index","item","label","indexOf","angle","es","colorType","colorRange","innerRadius","radius","showLabels","labelsStyle","fill","fontSize","fontWeight","stroke","labelsRadiusMultiplier","App","VisibleEventsContext_VisibleEventsContextProvider","NewEventContext_NewEventContextProvider","display","flexDirection","components_EventMap","Graphs_RadialGraph","RadialGraphSeverity","ReactDOM","render","src_App","document","querySelector"],"mappings":"8NA2BeA,EAtBG,SAAAC,GAAgB,ICOVC,EAZFC,EDKDC,EAAaH,EAAbG,OACnB,OACEC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEC,IAAKL,EAAOM,GACZC,SAAUP,EAAOO,SACjBC,UAAWR,EAAOQ,WAElBP,EAAAC,EAAAC,cAAA,OACEM,MAAO,CACLC,OAAQ,OACRC,MAAO,OACPC,aAAc,QACdC,YAAa,MACbC,YAAa,QACbC,YCnBYhB,EDmBcC,EAAOD,KClB5B,UAATA,EACK,UACW,WAATA,EACF,UACW,YAATA,EACF,UAEA,WDYDiB,aCRclB,EDQeE,EAAOF,SCP3B,cAAbA,EACK,UACe,SAAbA,EACF,UACe,WAAbA,EACF,UAEA,gBClBLmB,EAAkBC,IAAMC,cAAc,CAAC,KAAM,eAE7CC,EAA0B,SAAAC,GAAS,IAAAC,EACPC,mBAAS,MADFC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAChCK,EADgCH,EAAA,GACtBI,EADsBJ,EAAA,GAOvC,OAJAK,oBAAU,WACRD,KACC,IAGD3B,EAAAC,EAAAC,cAACc,EAAgBa,SAAjB,CAA0BC,MAAO,CAACJ,EAAUC,IACzCP,EAAMW,WC4DEC,EArEO,SAAApC,GAAgC,IAA7BqC,EAA6BrC,EAA7BqC,uBAA6BZ,EAClBC,mBAAS,IADSC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAC7Ca,EAD6CX,EAAA,GAClCY,EADkCZ,EAAA,GAAAa,EAEVd,mBAAS,IAFCe,EAAAb,OAAAC,EAAA,EAAAD,CAAAY,EAAA,GAE7CE,EAF6CD,EAAA,GAE9BE,EAF8BF,EAAA,GAAAG,EAGhBlB,mBAAS,IAHOmB,EAAAjB,OAAAC,EAAA,EAAAD,CAAAgB,EAAA,GAG7CE,EAH6CD,EAAA,GAGjCE,EAHiCF,EAAA,GAAAG,EAIJtB,mBAAS,IAJLuB,EAAArB,OAAAC,EAAA,EAAAD,CAAAoB,EAAA,GAI7CE,EAJ6CD,EAAA,GAI3BE,EAJ2BF,EAAA,GAAAG,EAMpBC,qBAAWjC,GANSkC,EAAA1B,OAAAC,EAAA,EAAAD,CAAAwB,EAAA,GAMnCrB,GANmCuB,EAAA,GAAAA,EAAA,IAoBpD,OACElD,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKiD,UAAU,yBACbnD,EAAAC,EAAAC,cAAA,+BAEFF,EAAAC,EAAAC,cAAA,OAAKiD,UAAU,uBACbnD,EAAAC,EAAAC,cAAA,QAAMkD,SAAU,SAAAC,GAAK,OAlBF,SAAAA,GACvBA,EAAMC,iBAEN3B,EAAY,CACV7B,KAAMoC,EACNrC,SAAUyC,EACViB,MAAOb,EACPc,YAAaV,IAEfb,IAS6BwB,CAAiBJ,KACxCrD,EAAAC,EAAAC,cAAA,UACEwD,UAAQ,EACRC,SAAU,SAAAN,GAAK,OAAIlB,EAAakB,EAAMO,OAAO9B,QAC7CA,MAAOI,GAEPlC,EAAAC,EAAAC,cAAA,sCACAF,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,0BAEFF,EAAAC,EAAAC,cAAA,UACEwD,UAAQ,EACRC,SAAU,SAAAN,GAAK,OAAId,EAAiBc,EAAMO,OAAO9B,QACjDA,MAAOQ,GAEPtC,EAAAC,EAAAC,cAAA,0CACAF,EAAAC,EAAAC,cAAA,2BACAF,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,sBAEFF,EAAAC,EAAAC,cAAA,SACEwD,UAAQ,EACRC,SAAU,SAAAN,GAAK,OAAIV,EAAcU,EAAMO,OAAO9B,QAC9C+B,YAAY,qBACZ/B,MAAOY,IAET1C,EAAAC,EAAAC,cAAA,SACEwD,UAAQ,EACRC,SAAU,SAAAN,GAAK,OAAIN,EAAoBM,EAAMO,OAAO9B,QACpD+B,YAAY,2BACZ/B,MAAOgB,IAET9C,EAAAC,EAAAC,cAAA,UAAQJ,KAAK,SAASqD,UAAU,UAAhC,uBCrBKW,EAvCG,WAAM,IAAAzC,EACUC,oBAAS,GADnBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACf0C,EADexC,EAAA,GACLyC,EADKzC,EAAA,GAGhB0C,EAAcC,iBAAO,MAE3BtC,oBAAU,WACRuC,OAAOC,iBAAiB,QAASC,IAChC,IAEH,IAAMA,EAAoB,SAAAhB,GAEtBA,EAAMO,SAAWK,EAAYK,SAC5BL,EAAYK,QAAQC,SAASlB,EAAMO,SAEpCI,GAAY,IAQhB,OACEhE,EAAAC,EAAAC,cAAA,OAAKM,MAAO,CAAEgE,SAAU,YAAcC,IAAKR,GACzCjE,EAAAC,EAAAC,cAAA,UACEiD,UAAS,uBAAAuB,OAAyBX,EAAW,SAAW,IACxDY,QAAS,kBAAMX,GAAaD,KAF9B,KAMCA,GACC/D,EAAAC,EAAAC,cAAA,OAAKiD,UAAU,0BACbnD,EAAAC,EAAAC,cAAC0E,EAAD,CAAe3C,uBAdQ,WAC7B+B,GAAY,SCJDa,EAhBE,SAAAC,GAAe,IAAAzD,EACEC,mBAAS,MADXC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACvB0D,EADuBxD,EAAA,GACbyD,EADazD,EAAA,GAa9B,OAVAK,oBAAU,WACRqD,IAAMC,IAAN,IAAAR,OAAcI,IACXK,KAAK,SAAAC,GACJJ,EAAYI,EAAIC,QAEjBC,MAAM,SAAAC,GACLC,QAAQC,IAAIF,MAEf,CAACT,IAEGC,GCDMW,EAbS,WAAM,IAAArE,EACYC,mBAAS,MADrBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACrBsE,EADqBpE,EAAA,GACPqE,EADOrE,EAAA,GAU5B,OAPAK,oBAAU,WACR,IAAMiE,EAAqBC,aAAaC,QAAQ,eAC1CC,EAAcC,KAAKC,MAAML,GAE/BD,EAAgBI,IACf,IAEIL,GCZHQ,EAAoB,SAACC,EAASC,GAClC,IAAIC,EAAiB,GAarB,OAXAF,EAAQG,QAAQ,SAAAxG,GACd,IAAMyG,GACHzG,EAAOQ,UAAY8F,EAAOI,IAAIC,MAC5B3G,EAAOQ,UAAY8F,EAAOM,IAAID,KACjC,EACIE,GACH7G,EAAOO,SAAW+F,EAAOI,IAAII,MAAQ9G,EAAOO,SAAW+F,EAAOM,IAAIE,KACnE,EACEL,GAAgBI,GAAaN,EAAeQ,KAAK/G,KAGhDuG,GCZHS,EAAuB9F,IAAMC,cAAc,CAAC,KAAM,eAElD8F,EAA+B,SAAA5F,GAAS,IAAAC,EACFC,mBAAS,IADPC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACrC4F,EADqC1F,EAAA,GACtB2F,EADsB3F,EAAA,GAO5C,OAJAK,oBAAU,WACRsF,KACC,IAGDlH,EAAAC,EAAAC,cAAC6G,EAAqBlF,SAAtB,CAA+BC,MAAO,CAACmF,EAAeC,IACnD9F,EAAMW,WCoHEoF,SA/GE,WAAM,IAAA9F,EACWC,mBAAS,MADpBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACdf,EADciB,EAAA,GACJ6F,EADI7F,EAAA,GAAAa,EAEad,mBAAS,MAFtBe,EAAAb,OAAAC,EAAA,EAAAD,CAAAY,EAAA,GAEd7B,EAFc8B,EAAA,GAEHgF,EAFGhF,EAAA,GAAAG,EAGGlB,mBAAS,MAHZmB,EAAAjB,OAAAC,EAAA,EAAAD,CAAAgB,EAAA,GAGd8E,EAHc7E,EAAA,GAGR8E,EAHQ9E,EAAA,GAAAG,EAIStB,mBAAS,IAJlBuB,EAAArB,OAAAC,EAAA,EAAAD,CAAAoB,EAAA,GAIdwD,EAJcvD,EAAA,GAIL2E,EAJK3E,EAAA,GAAAG,EAKqBC,qBAAW8D,GALhC7D,EAAA1B,OAAAC,EAAA,EAAAD,CAAAwB,EAAA,GAKCkE,GALDhE,EAAA,GAAAA,EAAA,IAAAuE,EAMWxE,qBAAWjC,GANtB0G,EAAAlG,OAAAC,EAAA,EAAAD,CAAAiG,EAAA,GAMd/F,EANcgG,EAAA,GAMJ/F,EANI+F,EAAA,GAAAC,EAOiBrG,oBAAS,GAP1BsG,EAAApG,OAAAC,EAAA,EAAAD,CAAAmG,EAAA,GAOdE,EAPcD,EAAA,GAODE,EAPCF,EAAA,GAAAG,EAQazG,mBAAS,IARtB0G,EAAAxG,OAAAC,EAAA,EAAAD,CAAAuG,EAAA,GASfE,GATeD,EAAA,GAAAA,EAAA,GASA9D,iBAAO,OAEtBgE,EAAkBxC,IAClBW,EAAS4B,EAAa3D,QACxB2D,EAAa3D,QAAQ6D,SAASC,YAC9B,KAEJxG,oBAAU,WACJsG,GACFd,EAAYc,EAAgB5H,UAC5B+G,EAAaa,EAAgB3H,WAC7BgH,EAAQW,EAAgBZ,QAExBF,EAAY,mBACZC,GAAc,oBACdE,EAAQ,OAET,CAACW,IAEJ,IAAMG,EAASxD,EAAS,UAExBjD,oBAAU,WACJyG,GACFb,EAAWa,IAEZ,CAACA,IAEJzG,oBAAU,WACRsF,EAAiBf,EAAkBC,EAASC,KAC3C,CAACD,IAkCJ,OANAxE,oBAAU,WACJF,GACFoG,GAAe,IAEhB,CAACpG,IAGF1B,EAAAC,EAAAC,cAAA,WACGK,GAAaD,GAAYgH,GACxBtH,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEmI,UAfQ,WAChB,OAAOT,EAAc,YAAc,WAe3BU,qBAhFSC,iGAiFT/H,OAAQ,QACRC,MAAO,OACPJ,SAAUA,EACVC,UAAWA,EACXkI,SAAU,iCACVhE,IAAKwD,EACLX,KAAMA,EACNoB,iBAAkB,SAAAC,GAAY,IACpBrI,EAA8BqI,EAA9BrI,SAAUC,EAAoBoI,EAApBpI,UAAW+G,EAASqB,EAATrB,KAC7BF,EAAY9G,GACZ+G,EAAa9G,GACbgH,EAAQD,GACRJ,EAAiBf,EAAkBC,EAASC,IAC5CP,aAAa8C,QACX,cACA3C,KAAK4C,UAAU,CAAEvI,WAAUC,YAAW+G,WAG1C3C,QAAS,SAAAtB,GAAK,OAzDD,SAAAA,GAChBwE,GAGL5C,IAAM6D,KAAK,UAAW,CACpBhJ,KAAM4B,EAAS5B,KACfyD,MAAO7B,EAAS6B,MAChBC,YAAa9B,EAAS8B,YACtBlD,SAAU+C,EAAM0F,OAAO,GACvBxI,UAAW8C,EAAM0F,OAAO,GACxBlJ,SAAU6B,EAAS7B,WAElBsF,KAAK,SAAAC,GACJoC,EAAWpB,EAAQ1B,OAAOU,EAAIC,OAC9B1D,EAAY,MACZmG,GAAe,KAEhBxC,MAAM,SAAAC,GACLC,QAAQC,IAAI,CAAEF,UAuCQyD,CAAe3F,KAEhC+C,EAAQ6C,OAAS,GAChB7C,EAAQ8C,IAAI,SAAAnJ,GACV,OAAOC,EAAAC,EAAAC,cAACiJ,EAAD,CAAW/I,IAAKL,EAAOM,GAAIN,OAAQA,OAGhDC,EAAAC,EAAAC,cAACkJ,EAAD,kBCpEKC,EAjDK,WAAM,IAAAhI,EACAC,mBAAS,MADTC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACjBgE,EADiB9D,EAAA,GACX+H,EADW/H,EAAA,GAAAyB,EAGPC,qBAAW8D,GAArBsB,EAHiB7G,OAAAC,EAAA,EAAAD,CAAAwB,EAAA,MA0BxB,OArBApB,oBAAU,WACR,GAAIyG,EAAQ,CACV,IACIkB,EADAC,EAAY,GAEhBnB,EAAOoB,KAAK,SAACxJ,EAAGyJ,GAAJ,OAAUzJ,EAAEH,KAAK6J,cAAcD,EAAE5J,QAC7CuI,EAAO9B,QAAQ,SAAAlD,GACb,GAAIA,EAAMvD,OAASyJ,EAAM,CACvB,IAAMK,EAAQJ,EAAUN,IAAI,SAAAW,GAAI,OAAIA,EAAKC,QAAOC,QAAQ1G,EAAMvD,MAC9D0J,EAAUI,GAAOI,aAEjBR,EAAU1C,KAAK,CACbkD,MAAO,EACPF,MAAOzG,EAAMvD,OAGjByJ,EAAOlG,EAAMvD,OAEfwJ,EAAQE,KAET,CAACnB,IAGFhD,GACErF,EAAAC,EAAAC,cAAC+J,EAAA,EAAD,CACEC,UAAW,WACXC,WAAY,CAAC,UAAW,UAAW,WACnC9E,KAAMA,EACN5E,OAAQ,IACRC,MAAO,IACP0J,YAAa,GACbC,OAAQ,IACRC,YAAY,EACZC,YAAa,CACXC,KAAM,QACNC,SAAU,GACVC,WAAY,KAEdC,OAAQ,QACRC,uBAAwB,OCQjBvB,EAnDK,WAAM,IAAAhI,EACAC,mBAAS,MADTC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACjBgE,EADiB9D,EAAA,GACX+H,EADW/H,EAAA,GAAAyB,EAGPC,qBAAW8D,GAArBsB,EAHiB7G,OAAAC,EAAA,EAAAD,CAAAwB,EAAA,MA4BxB,OAvBApB,oBAAU,WACR,GAAIyG,EAAQ,CACV,IACIkB,EADAC,EAAY,GAEhBnB,EAAOoB,KAAK,SAACxJ,EAAGyJ,GAAJ,OAAUzJ,EAAEJ,SAAS8J,cAAcD,EAAE7J,YACjDwI,EAAO9B,QAAQ,SAAAlD,GACb,GAAIA,EAAMxD,WAAa0J,EAAM,CAC3B,IAAMK,EAAQJ,EACXN,IAAI,SAAAW,GAAI,OAAIA,EAAKC,QACjBC,QAAQ1G,EAAMxD,UACjB2J,EAAUI,GAAOI,aAEjBR,EAAU1C,KAAK,CACbkD,MAAO,EACPF,MAAOzG,EAAMxD,WAGjB0J,EAAOlG,EAAMxD,WAEfyJ,EAAQE,KAET,CAACnB,IAGFhD,GACErF,EAAAC,EAAAC,cAAC+J,EAAA,EAAD,CACEC,UAAW,WACXC,WAAY,CAAC,UAAW,UAAW,SAAU,WAC7C9E,KAAMA,EACN5E,OAAQ,IACRC,MAAO,IACP0J,YAAa,GACbC,OAAQ,IACRC,YAAY,EACZC,YAAa,CACXC,KAAM,QACNC,SAAU,GACVC,WAAY,KAEdC,OAAQ,QACRC,uBAAwB,OCjBjBC,SAtBH,WACV,OACE7K,EAAAC,EAAAC,cAAC4K,EAAD,KACE9K,EAAAC,EAAAC,cAAC6K,EAAD,KACE/K,EAAAC,EAAAC,cAAA,OAAKM,MAAO,CAAEwK,QAAS,OAAQC,cAAe,QAC5CjL,EAAAC,EAAAC,cAACgL,EAAD,MACAlL,EAAAC,EAAAC,cAAA,OAAKiD,UAAU,UACbnD,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,4BACAF,EAAAC,EAAAC,cAACiL,EAAD,OAEFnL,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,gCACAF,EAAAC,EAAAC,cAACkL,EAAD,aCnBdC,IAASC,OAAOtL,EAAAC,EAAAC,cAACqL,EAAD,MAASC,SAASC,cAAc","file":"static/js/main.82d4247c.chunk.js","sourcesContent":["import React from \"react\";\nimport { Marker } from \"react-map-gl\";\n\nimport { getMarkerFill, getMarkerBorder } from \"../../utils/formatMarkers\";\n\nconst MapMarker = ({ marker }) => {\n  return (\n    <Marker\n      key={marker.id}\n      latitude={marker.latitude}\n      longitude={marker.longitude}\n    >\n      <div\n        style={{\n          height: \"18px\",\n          width: \"18px\",\n          borderRadius: \"500px\",\n          borderWidth: \"3px\",\n          borderStyle: \"solid\",\n          background: getMarkerFill(marker.type),\n          borderColor: getMarkerBorder(marker.severity)\n        }}\n      />\n    </Marker>\n  );\n};\n\nexport default MapMarker;\n","const getMarkerFill = type => {\n  if (type === \"Crime\") {\n    return \"#cd4545\";\n  } else if (type === \"Safety\") {\n    return \"#f16821\";\n  } else if (type === \"Traffic\") {\n    return \"#f3a333\";\n  } else {\n    return \"#4f9da6\";\n  }\n};\n\nconst getMarkerBorder = severity => {\n  if (severity === \"Emergency\") {\n    return \"#CD4545\";\n  } else if (severity === \"High\") {\n    return \"#F16820\";\n  } else if (severity === \"Medium\") {\n    return \"#F3A333\";\n  } else {\n    return \"#237146\";\n  }\n};\n\nexport { getMarkerFill, getMarkerBorder };\n","import React, { useState, useEffect } from \"react\";\n\nconst NewEventContext = React.createContext([null, () => {}]);\n\nconst NewEventContextProvider = props => {\n  const [newEvent, setNewEvent] = useState(null);\n\n  useEffect(() => {\n    setNewEvent();\n  }, []);\n\n  return (\n    <NewEventContext.Provider value={[newEvent, setNewEvent]}>\n      {props.children}\n    </NewEventContext.Provider>\n  );\n};\n\nexport { NewEventContext, NewEventContextProvider };\n","import React, { useState, useContext } from \"react\";\n\nimport { NewEventContext } from \"../../context/NewEventContext\";\n\nconst NewMarkerForm = ({ handleCloseAfterSubmit }) => {\n  const [eventType, setEventType] = useState(\"\");\n  const [eventSeverity, setEventSeverity] = useState(\"\");\n  const [eventTitle, setEventTitle] = useState(\"\");\n  const [eventDescription, setEventDescription] = useState(\"\");\n\n  const [newEvent, setNewEvent] = useContext(NewEventContext);\n\n  const handleFormSubmit = event => {\n    event.preventDefault();\n\n    setNewEvent({\n      type: eventType,\n      severity: eventSeverity,\n      title: eventTitle,\n      description: eventDescription\n    });\n    handleCloseAfterSubmit();\n  };\n\n  return (\n    <div>\n      <div className=\"dropdown-form__header\">\n        <h4>Report New Event</h4>\n      </div>\n      <div className=\"dropdown-form__body\">\n        <form onSubmit={event => handleFormSubmit(event)}>\n          <select\n            required\n            onChange={event => setEventType(event.target.value)}\n            value={eventType}\n          >\n            <option>Select event type...</option>\n            <option>Crime</option>\n            <option>Safety</option>\n            <option>Traffic</option>\n          </select>\n          <select\n            required\n            onChange={event => setEventSeverity(event.target.value)}\n            value={eventSeverity}\n          >\n            <option>Select event severity...</option>\n            <option>Emergency</option>\n            <option>High</option>\n            <option>Medium</option>\n            <option>Low</option>\n          </select>\n          <input\n            required\n            onChange={event => setEventTitle(event.target.value)}\n            placeholder=\"New event title...\"\n            value={eventTitle}\n          />\n          <input\n            required\n            onChange={event => setEventDescription(event.target.value)}\n            placeholder=\"New event description...\"\n            value={eventDescription}\n          />\n          <button type=\"submit\" className=\"button\">\n            Select Location\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default NewMarkerForm;\n","import React, { useState, useEffect, useRef, Fragment } from \"react\";\n\nimport NewMarkerForm from \"./NewMarkerForm\";\n\nconst NewMarker = () => {\n  const [isActive, setIsActive] = useState(false);\n\n  const dropdownEle = useRef(null);\n\n  useEffect(() => {\n    window.addEventListener(\"click\", handleWindowClick);\n  }, []);\n\n  const handleWindowClick = event => {\n    if (\n      event.target !== dropdownEle.current &&\n      !dropdownEle.current.contains(event.target)\n    ) {\n      setIsActive(false);\n    }\n  };\n\n  const handleCloseAfterSubmit = () => {\n    setIsActive(false);\n  };\n\n  return (\n    <div style={{ position: \"relative\" }} ref={dropdownEle}>\n      <button\n        className={`button button-round ${isActive ? \"active\" : \"\"}`}\n        onClick={() => setIsActive(!isActive)}\n      >\n        +\n      </button>\n      {isActive && (\n        <div className=\"button-round__dropdown\">\n          <NewMarkerForm handleCloseAfterSubmit={handleCloseAfterSubmit} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default NewMarker;\n","import { useState, useEffect } from \"react\";\nimport Axios from \"axios\";\n\nconst useFetch = reqResource => {\n  const [resource, setResource] = useState(null);\n\n  useEffect(() => {\n    Axios.get(`/${reqResource}`)\n      .then(res => {\n        setResource(res.data);\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  }, [reqResource]);\n\n  return resource;\n};\n\nexport default useFetch;\n","import { useState, useEffect } from \"react\";\n\nconst usePrevLocation = () => {\n  const [prevLocation, setPrevLocation] = useState(null);\n\n  useEffect(() => {\n    const mapLocationStorage = localStorage.getItem(\"mapLocation\");\n    const mapLocation = JSON.parse(mapLocationStorage);\n\n    setPrevLocation(mapLocation);\n  }, []);\n\n  return prevLocation;\n};\n\nexport default usePrevLocation;\n","const getVisibleMarkers = (markers, bounds) => {\n  let visibleMarkers = [];\n\n  markers.forEach(marker => {\n    const longInBounds =\n      (marker.longitude - bounds._ne.lng) *\n        (marker.longitude - bounds._sw.lng) <\n      0;\n    const latInBounds =\n      (marker.latitude - bounds._ne.lat) * (marker.latitude - bounds._sw.lat) <\n      0;\n    if (longInBounds && latInBounds) visibleMarkers.push(marker);\n  });\n\n  return visibleMarkers;\n};\n\nexport { getVisibleMarkers };\n","import React, { useState, useEffect } from \"react\";\n\nconst VisibleEventsContext = React.createContext([null, () => {}]);\n\nconst VisibleEventsContextProvider = props => {\n  const [visibleEvents, setVisibleEvents] = useState([]);\n\n  useEffect(() => {\n    setVisibleEvents();\n  }, []);\n\n  return (\n    <VisibleEventsContext.Provider value={[visibleEvents, setVisibleEvents]}>\n      {props.children}\n    </VisibleEventsContext.Provider>\n  );\n};\n\nexport { VisibleEventsContext, VisibleEventsContextProvider };\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\nimport ReactMapGL from \"react-map-gl\";\nimport Axios from \"axios\";\n\nimport MapMarker from \"./MapMarker\";\nimport NewMarker from \"./NewMarker\";\n\nimport useFetch from \"../../utils/useFetch\";\nimport usePrevLocation from \"../../utils/usePrevLocation\";\nimport { getVisibleMarkers } from \"../../utils/getVisibleMarkers\";\n\nimport { NewEventContext } from \"../../context/NewEventContext\";\nimport { VisibleEventsContext } from \"../../context/VisibleEventsContext\";\n\nimport \"mapbox-gl/dist/mapbox-gl.css\";\n\nconst mapboxApiKey = process.env.REACT_APP_MAPBOX_API_KEY;\n\nconst EventMap = () => {\n  const [latitude, setLatitude] = useState(null);\n  const [longitude, setLongitude] = useState(null);\n  const [zoom, setZoom] = useState(null);\n  const [markers, setMarkers] = useState([]);\n  const [visibleEvents, setVisibleEvents] = useContext(VisibleEventsContext);\n  const [newEvent, setNewEvent] = useContext(NewEventContext);\n  const [isClickable, setIsClickable] = useState(false);\n  const [newMarker, setNewMarker] = useState({});\n  const mapContainer = useRef(null);\n\n  const prevMapLocation = usePrevLocation();\n  const bounds = mapContainer.current\n    ? mapContainer.current.getMap().getBounds()\n    : null;\n\n  useEffect(() => {\n    if (prevMapLocation) {\n      setLatitude(prevMapLocation.latitude);\n      setLongitude(prevMapLocation.longitude);\n      setZoom(prevMapLocation.zoom);\n    } else {\n      setLatitude(33.42648270139036);\n      setLongitude(-117.74208457016326);\n      setZoom(8.2);\n    }\n  }, [prevMapLocation]);\n\n  const events = useFetch(\"events\");\n\n  useEffect(() => {\n    if (events) {\n      setMarkers(events);\n    }\n  }, [events]);\n\n  useEffect(() => {\n    setVisibleEvents(getVisibleMarkers(markers, bounds));\n  }, [markers]);\n\n  const handleMapClick = event => {\n    if (!isClickable) {\n      return;\n    }\n    Axios.post(\"/events\", {\n      type: newEvent.type,\n      title: newEvent.title,\n      description: newEvent.description,\n      latitude: event.lngLat[1],\n      longitude: event.lngLat[0],\n      severity: newEvent.severity\n    })\n      .then(res => {\n        setMarkers(markers.concat(res.data));\n        setNewEvent(null);\n        setIsClickable(false);\n      })\n      .catch(err => {\n        console.log({ err });\n      });\n  };\n\n  const getCursor = () => {\n    return isClickable ? \"crosshair\" : \"pointer\";\n  };\n\n  useEffect(() => {\n    if (newEvent) {\n      setIsClickable(true);\n    }\n  }, [newEvent]);\n\n  return (\n    <div>\n      {longitude && latitude && zoom && (\n        <div>\n          <ReactMapGL\n            getCursor={getCursor}\n            mapboxApiAccessToken={mapboxApiKey}\n            height={\"100vh\"}\n            width={\"75vw\"}\n            latitude={latitude}\n            longitude={longitude}\n            mapStyle={\"mapbox://styles/mapbox/dark-v9\"}\n            ref={mapContainer}\n            zoom={zoom}\n            onViewportChange={viewport => {\n              const { latitude, longitude, zoom } = viewport;\n              setLatitude(latitude);\n              setLongitude(longitude);\n              setZoom(zoom);\n              setVisibleEvents(getVisibleMarkers(markers, bounds));\n              localStorage.setItem(\n                \"mapLocation\",\n                JSON.stringify({ latitude, longitude, zoom })\n              );\n            }}\n            onClick={event => handleMapClick(event)}\n          >\n            {markers.length > 0 &&\n              markers.map(marker => {\n                return <MapMarker key={marker.id} marker={marker} />;\n              })}\n          </ReactMapGL>\n          <NewMarker />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default EventMap;\n","import React, { useState, useEffect, useContext } from \"react\";\nimport { RadialChart } from \"react-vis\";\n\nimport { VisibleEventsContext } from \"../../context/VisibleEventsContext\";\n\nconst RadialGraph = () => {\n  const [data, setData] = useState(null);\n\n  const [events] = useContext(VisibleEventsContext);\n\n  useEffect(() => {\n    if (events) {\n      let dataArray = [];\n      let prev;\n      events.sort((a, b) => a.type.localeCompare(b.type));\n      events.forEach(event => {\n        if (event.type === prev) {\n          const index = dataArray.map(item => item.label).indexOf(event.type);\n          dataArray[index].angle++;\n        } else {\n          dataArray.push({\n            angle: 1,\n            label: event.type\n          });\n        }\n        prev = event.type;\n      });\n      setData(dataArray);\n    }\n  }, [events]);\n\n  return (\n    data && (\n      <RadialChart\n        colorType={\"category\"}\n        colorRange={[\"#f3a333\", \"#cd4545\", \"#f16821\"]}\n        data={data}\n        height={350}\n        width={350}\n        innerRadius={70}\n        radius={100}\n        showLabels={true}\n        labelsStyle={{\n          fill: \"white\",\n          fontSize: 18,\n          fontWeight: 500\n        }}\n        stroke={\"white\"}\n        labelsRadiusMultiplier={1.6}\n      />\n    )\n  );\n};\n\nexport default RadialGraph;\n","import React, { useState, useEffect, useContext } from \"react\";\nimport { RadialChart } from \"react-vis\";\n\nimport { VisibleEventsContext } from \"../../context/VisibleEventsContext\";\n\nconst RadialGraph = () => {\n  const [data, setData] = useState(null);\n\n  const [events] = useContext(VisibleEventsContext);\n\n  useEffect(() => {\n    if (events) {\n      let dataArray = [];\n      let prev;\n      events.sort((a, b) => a.severity.localeCompare(b.severity));\n      events.forEach(event => {\n        if (event.severity === prev) {\n          const index = dataArray\n            .map(item => item.label)\n            .indexOf(event.severity);\n          dataArray[index].angle++;\n        } else {\n          dataArray.push({\n            angle: 1,\n            label: event.severity\n          });\n        }\n        prev = event.severity;\n      });\n      setData(dataArray);\n    }\n  }, [events]);\n\n  return (\n    data && (\n      <RadialChart\n        colorType={\"category\"}\n        colorRange={[\"#f3a333\", \"#cd4545\", \"237145\", \"#f16821\"]}\n        data={data}\n        height={350}\n        width={350}\n        innerRadius={70}\n        radius={100}\n        showLabels={true}\n        labelsStyle={{\n          fill: \"white\",\n          fontSize: 18,\n          fontWeight: 500\n        }}\n        stroke={\"white\"}\n        labelsRadiusMultiplier={1.6}\n      />\n    )\n  );\n};\n\nexport default RadialGraph;\n","import React from \"react\";\n\nimport EventMap from \"./components/EventMap\";\nimport RadialGraph from \"./components/Graphs/RadialGraph\";\nimport RadialGraphSeverity from \"./components/Graphs/RadialGraphSeverity\";\n\nimport { VisibleEventsContextProvider } from \"./context/VisibleEventsContext\";\nimport { NewEventContextProvider } from \"./context/NewEventContext\";\n\nimport \"./styles/styles.scss\";\n\nconst App = () => {\n  return (\n    <VisibleEventsContextProvider>\n      <NewEventContextProvider>\n        <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n          <EventMap />\n          <div className=\"graphs\">\n            <div>\n              <h3>Events by Type</h3>\n              <RadialGraph />\n            </div>\n            <div>\n              <h3>Events by Severity</h3>\n              <RadialGraphSeverity />\n            </div>\n          </div>\n        </div>\n      </NewEventContextProvider>\n    </VisibleEventsContextProvider>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.querySelector(\"#root\"));\n"],"sourceRoot":""}